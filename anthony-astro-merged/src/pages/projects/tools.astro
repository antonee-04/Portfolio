---
import Base from "../../layouts/Base.astro";
---
<Base title="2D Top-Down RPG — Case Study (WIP)" description="Early WIP: player movement, animation state control, and pixel-art pipeline.">
  <h1>2D Top-Down RPG <span style="font-size:.6em;opacity:.8">• WIP (Tools/Prototype)</span></h1>

  <p class="muted">
    <strong>Engine:</strong> Unity 2022 LTS &nbsp;•&nbsp; <strong>Language:</strong> C# &nbsp;•&nbsp; <strong>Role:</strong> Solo Developer &nbsp;•&nbsp; <strong>Art:</strong> Custom player sprite + licensed tileset
  </p>

  <section class="prose">
    <h2>Overview</h2>
    <p>
      Early work-in-progress top-down RPG. I assembled a playable sample scene, wired up 8-direction movement with animation
      parameters, and began a pixel-art pipeline for the player sprite while integrating a purchased tileset.
      Goal: validate controls/readability and a clean art workflow before deeper systems.
    </p>

    <h2>Footage</h2>
    <video src="/media/tools/videos/walk-cycle.mp4" autoplay muted loop playsinline></video>

    <h2>Gallery</h2>
    <div class="grid">
      <img src="/media/tools-thumb.jpg" alt="Sample scene — shrine, pond, and path layout" />
      <img src="/media/tools/shots/map-01.jpg" alt="Tile composition and collision pass" />
    </div>

    <h2>What I built (programmer focus)</h2>

    <h3>Player movement &amp; animation state</h3>
    <ul>
      <li>Reads raw input (WASD/Arrow) into a 2D vector, moves in <code>FixedUpdate</code>, and drives the Animator with <code>Horizontal</code>, <code>Vertical</code>, and <code>Speed</code> parameters.</li>
      <li>Idle vs walk transitions by <code>Speed</code> (squared magnitude) so the blend tree stays stable on cardinals/diagonals.</li>
    </ul>

    <pre class="code"><code class="language-csharp">{`// PlayerMovement.cs — input, movement, and animator parameters (excerpt)
public float moveSpeed = 5f;
private Vector2 movement;
private Animator animator;

void Update() {
  movement.x = Input.GetAxisRaw("Horizontal");
  movement.y = Input.GetAxisRaw("Vertical");
  UpdateAnimation();
}

void FixedUpdate() {
  Vector3 delta = new Vector3(movement.x, movement.y, 0f) * moveSpeed * Time.fixedDeltaTime;
  transform.position += delta;
}

void UpdateAnimation() {
  if (movement.x != 0 || movement.y != 0) {
    animator.SetFloat("Horizontal", movement.x);
    animator.SetFloat("Vertical", movement.y);
    animator.SetFloat("Speed", movement.sqrMagnitude);
  } else {
    animator.SetFloat("Speed", 0);
  }
}`}</code></pre>

    <h3>Art workflow (pixel)</h3>
    <ul>
      <li>Custom player sprite authored at a fixed pixel density; tileset is licensed/credited and assembled in Unity Tilemap.</li>
      <li>Consistent palette/outline so the character reads against purchased tiles.</li>
    </ul>

    <h2>WIP scope &amp; next steps</h2>
    <ul>
      <li>Polish blend tree (8-dir + idle facings), add run/crouch variants.</li>
      <li>Tilemap collision + interact system (talk, pickup, open).</li>
      <li>Camera framing + screen-space UI mock (quests/inventory).</li>
    </ul>

    <p><em>Note: Active WIP prototype; systems and art will evolve.</em></p>
  </section>
</Base>