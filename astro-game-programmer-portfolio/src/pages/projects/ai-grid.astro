---
import Base from "../../layouts/Base.astro";
---
<Base title="AI Grid Pathfinding — Case Study" description="Custom grid graph, A*, terrain sampling, and debug overlays.">
  <h1>AI Grid Pathfinding</h1>
  <p class="muted">Role: Solo • Tech: Unity 2022 LTS, C# • Time: 2025</p>
  <div class="prose">
    <h2>Goal</h2>
    <p>Design a grid graph & A* pathfinder that works with Unity Terrain colliders and supports debug viz.</p>

    <h2>Highlights</h2>
    <ul>
      <li>Terrain sampling + node validity checks for void/steep tiles.</li>
      <li>Pool-based open/closed sets to avoid GC allocations.</li>
      <li>Toggleable gizmo rendering and heatmap captures.</li>
    </ul>

    <h2>Deep-dive: NullReference Spike</h2>
    <p>Fixed a GridGraph.NodeFromWorld() NRE by guarding terrain references and caching layer masks.</p>

    <div class="code"><pre><code>// Pseudocode
Node NodeFromWorld(Vector3 pos) {
  if (!terrain) return null;
  var local = pos - origin;
  int x = Mathf.FloorToInt(local.x / cellSize);
  int z = Mathf.FloorToInt(local.z / cellSize);
  return InBounds(x,z) ? nodes[x,z] : null;
}</code></pre></div>

    <h2>Results</h2>
    <ul>
      <li>Path cost calc in ~0.2–0.6 ms per query in sample scenes.</li>
      <li>Stutter removed by preallocating node arrays.</li>
    </ul>

    <h2>Links</h2>
    <ul>
      <li><a href="https://github.com/yourname/ai-grid" target="_blank" rel="noopener">GitHub Repo</a></li>
    </ul>
  </div>
</Base>
